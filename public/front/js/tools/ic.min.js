ic=function(){"use strict";function a(e,t,n){var o,i=document.createElement(e);for(o in t)t[o]instanceof Object||"boolean"==typeof t[o]?i[o]=t[o]:i.setAttribute(o,t[o]);return void 0!==n&&r(i,n),i}function e(e,t,n){e=e||"warning",(n=n||{}).title=n.title||"",n.text=n.text||"",t.innerHTML="",t.appendChild(a("div",{class:"alert alert-block alert-"+e+" fade in"},[a("div",{"data-dismiss":"alert",class:"close icon fa-window-close",onclick:function(e){l(e.target.parentElement)}}),a("h4",{class:"alert-heading"},n.title),a("div",{class:"alert-content"},n.text)]))}var n,o,i,r=function(e,t){if(void 0===t)e.insertAdjacentHTML("beforeend","");else if(t instanceof Element)e.appendChild(t);else if("object"==typeof t)for(var n in t)r(e,t[n]);else e.insertAdjacentHTML("beforeend",t)},l=(n=a("div",{style:"display:none"}),document.body&&document.body.appendChild(n),function(e){if(e instanceof NodeList||e instanceof HTMLCollection)for(var t=0;t<e.length;++t)ic.discard(e[t]);else{if(!(e instanceof HTMLElement))throw new Error("Invalid element to discard: "+typeof e);n.appendChild(e),n.innerHTML=""}}),s={ajaxUrl:"",alwaysCallback:!1,async:!0};return{el:a,mergeObjects:function e(t,n){for(var o in n)n.hasOwnProperty(o)&&"object"==typeof t[o]?e(t[o],n[o]):t[o]=n[o];return t},notif:{danger:e.bind(null,"danger"),success:e.bind(null,"success"),warning:e.bind(null,"warning")},drop:function(e,t,n,o){function i(e){if((!e||"drop-item"!==e.target.className||27===e.keyCode)&&document.ic_openedDrops){for(var t=document.ic_openedDrops,n=0,o=t.length;n<o;++n)"function"==typeof t[n].element.closeDropdownClb&&t[n].element.closeDropdownClb(t[n]),t[n].element.remove(),t[n].parent.dropDownFired=!1,document.body.removeEventListener("click",this,!1),document.body.removeEventListener("keydown",this,!1);document.ic_openedDrops=[]}}if(e.dropDownFired)i();else if(t.length){e.dropDownFired=!0,(n=n||{}).rightAllign=n.rightAllign||!1,void 0===n.autoclose&&(n.autoclose=!0),e.style.position="relative";var r,a,l=window.getComputedStyle(e),s=this.el("div",{class:"drop"});for(i(),s.closeDropdownClb=o||!1,s.style.width=n.width||"auto",s.style[n.rightAllign?"right":"left"]=0,s.style.top=Math.ceil(e.offsetHeight+parseFloat(l.marginTop)+parseFloat(l.marginBottom))+"px",void 0!==n.marginTop&&(s.style.marginTop=n.marginTop),void 0!==n.marginLeft&&(s.style.marginLeft=n.marginLeft),r=0,a=t.length;r<a;++r){var c={element:s,params:t[r],parent:e};s.appendChild(this.el("div",{class:"drop-item",onclick:function(){this.parent.dropDownFired=!1,this.params.action(this.element),n.autoclose&&i()}.bind(c)},c.params.name))}void 0===document.ic_openedDrops&&(document.ic_openedDrops=[]),document.ic_openedDrops.push({element:s,parent:e}),e.appendChild(s),document.body.addEventListener("click",i,!1),document.body.addEventListener("keydown",i,!1)}},discard:l,importScript:(o=document.head||document.getElementsByTagName("head")[0],i=[],function(e,t){var n;-1===i.indexOf(e)?((n=ic.el("script",{type:"text/javascript",onerror:c})).onload=function(){i.push(e),"function"==typeof t&&t()},o.appendChild(n),n.src=e):"function"==typeof t&&t()}),funLoader:function(e,t,n){if(!e instanceof HTMLElement&&(e=document.body),void 0===t&&(t=!0,e.hasAttribute("fun-loader")&&this.funLoader(e,!1)),t)n=n||{},n=ic.mergeObjects(n,{message:"Loading...",timeout:2500}),e.style.position="relative",e.appendChild(ic.el("DIV",{style:"position:absolute;top:0;bottom:0;left:0;right:0;background:rgba(256,256,256,0.5);",class:"fun-loader-back","fun-loader":1},ic.el("DIV",{style:"position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);"},n.message))),e.setAttribute("fun-loader",1);else if(e.hasAttribute("fun-loader")){for(var o=0;o<e.childNodes.length;++o)"fun-loader-back"==e.childNodes[o].className&&ic.discard(e.childNodes[o]);e.removeAttribute("fun-loader")}},defaults:s,happyAjax:function(e,l,t,n){$.ajax({url:n||s.ajaxUrl,async:s.async,method:"POST",type:"POST",dataType:"json",data:e,beforeSend:function(e){e.setRequestHeader("usc",function(e){for(var t=e+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){for(var i=n[o];" "==i.charAt(0);)i=i.substring(1,i.length);if(0==i.indexOf(t))return i.substring(t.length,i.length)}return null}("usc"))},success:function(e,t,n){var o,i,r,a=n.getResponseHeader("usc");"string"==typeof a&&a.length&&(o="usc",i=a,r="",(n=1)&&((a=new Date).setTime(a.getTime()+24*n*60*60*1e3),r="; expires="+a.toUTCString()),document.cookie=o+"="+(i||"")+r+"; path=/"),"function"==typeof s.alwaysCallback&&s.alwaysCallback(),"function"==typeof l&&l(e)},error:function(e){"function"==typeof s.alwaysCallback&&s.alwaysCallback(),"function"==typeof t?t(e):alert("Something serious happened: "+e.responseText)}})},select:function(e,t,n){var o,i=[];n=n||null;for(var r=0;r<e.length;++r)o=e[r],null!==n&&n===o.value&&(o.selected="selected"),i.push(a("option",o,o.name));return a("select",t,i)},pairToSrc:function(e){var t,n=[];for(t in e)n.push({value:t,name:e[t]});return n},b64toBlob:function(e,t,n){t=t||"",n=n||512;for(var o=atob(e),i=[],r=0;r<o.length;r+=n){for(var a=o.slice(r,r+n),l=new Array(a.length),s=0;s<a.length;s++)l[s]=a.charCodeAt(s);var c=new Uint8Array(l);i.push(c)}return new Blob(i,{type:t})},copyToClipboard:function(e){if(navigator.clipboard&&window.isSecureContext)return navigator.clipboard.writeText(e);{let n=document.createElement("textarea");return n.value=e,n.style.position="fixed",n.style.left="-999999px",n.style.top="-999999px",document.body.appendChild(n),n.focus(),n.select(),new Promise((e,t)=>{(document.execCommand("copy")?e:t)(),n.remove()})}}};function c(e){throw new URIError("The script "+e.target.src+" is not accessible.")}}();
